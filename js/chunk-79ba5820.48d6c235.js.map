{"version":3,"sources":["webpack:///./src/views/videoDetail/VideoDetail.vue?c0c1","webpack:///src/views/videoDetail/VideoDetail.vue","webpack:///./src/views/videoDetail/VideoDetail.vue?ef67","webpack:///./src/views/videoDetail/VideoDetail.vue","webpack:///./src/views/videoDetail/VideoDetail.vue?dec2"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","items","scopedSlots","_u","key","fn","ref","videoDetail","videoUrl","on","toggleBrs","staticStyle","hotComments","comments","total","CurrentChange","proxy","staticClass","_v","_s","_f","publishTime","playTime","title","_e","Pvideo","staticRenderFns","name","components","data","created","getData","id","$bus","$emit","mounted","$store","state","flag","commit","methods","setTimeout","videoBox","resetBrs","component"],"mappings":"gJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,iBAAiB,CAACF,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQN,EAAIO,SAASH,EAAG,UAAU,CAACI,YAAYR,EAAIS,GAAG,CAAC,CAACC,IAAI,OAAOC,GAAG,WAAW,MAAO,CAACP,EAAG,YAAY,CAACQ,IAAI,WAAWN,MAAM,CAAC,YAAcN,EAAIa,YAAY,SAAWb,EAAIc,UAAUC,GAAG,CAAC,UAAYf,EAAIgB,aAAaZ,EAAG,MAAM,CAACa,YAAY,CAAC,aAAa,WAAWb,EAAG,WAAW,CAACE,MAAM,CAAC,YAAcN,EAAIkB,YAAY,SAAWlB,EAAImB,SAAS,MAAQnB,EAAIoB,MAAM,YAAc,GAAGL,GAAG,CAAC,cAAgBf,EAAIqB,mBAAmBC,OAAM,GAAM,CAACZ,IAAI,QAAQC,GAAG,WAAW,MAAO,CAACP,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,UAAWN,EAAe,YAAEI,EAAG,MAAM,CAACmB,YAAY,cAAc,CAACnB,EAAG,IAAI,CAACmB,YAAY,gBAAgB,CAACvB,EAAIwB,GAAG,SAASxB,EAAIyB,GAAGzB,EAAI0B,GAAG,aAAP1B,CAAqBA,EAAIa,YAAYc,cAAc,OAAOvB,EAAG,IAAI,CAACmB,YAAY,cAAc,CAACvB,EAAIwB,GAAG,SAASxB,EAAIyB,GAAGzB,EAAI0B,GAAG,kBAAP1B,CAA0BA,EAAIa,YAAYe,WAAW,QAAQxB,EAAG,IAAI,CAACmB,YAAY,aAAa,CAACvB,EAAIwB,GAAGxB,EAAIyB,GAAGzB,EAAIa,YAAYgB,YAAY7B,EAAI8B,KAAK1B,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,UAAUF,EAAG,kBAAkB,CAACE,MAAM,CAAC,OAASN,EAAI+B,YAAYT,OAAM,QAAW,IACtnCU,EAAkB,G,4GCkDtB,GACEC,KAAM,cACNC,WAAY,CAAd,iGACEC,KAHF,WAII,MAAO,CACL5B,MAAO,CACb,CAAQ,MAAR,KAAQ,KAAR,SACA,CAAQ,MAAR,MAAQ,KAAR,YACA,CAAQ,MAAR,KAAQ,KAAR,aACA,CAAQ,MAAR,OAAQ,KAAR,YACA,CAAQ,MAAR,KAAQ,KAAR,WACA,CAAQ,MAAR,OAAQ,KAAR,WAEMM,YAAa,KACbC,SAAU,KACVI,YAAa,KACbC,SAAU,KACVC,MAAO,KACPW,OAAQ,OAGZK,QArBF,WAsBI,IAAJ,uBACInC,KAAKoC,QAAQC,GACbrC,KAAKsC,KAAKC,MAAM,cAAe,IAEjCC,QA1BF,WA4BIxC,KAAKsC,KAAKC,MAAM,sBAAuB,MACnCvC,KAAKyC,OAAOC,MAAMC,OACpB3C,KAAKyC,OAAOG,OAAO,UACnB5C,KAAKsC,KAAKC,MAAM,WAGpBM,QAAS,CACP,QADJ,SACA,+LACA,kBADA,uBACA,EADA,EACA,KADA,SAEA,kBAFA,uBAEA,EAFA,EAEA,KACA,qBACA,aAJA,UAKA,kBALA,wBAKA,EALA,EAKA,KACA,4BACA,sBACA,UARA,UASA,kBATA,iBASA,EATA,EASA,KACA,gBAVA,+CAYI,cAbJ,SAaA,gLACA,oBACA,MAFA,iCAGA,kBAHA,gBAGA,EAHA,EAGA,KACA,4BACA,sBALA,6BAMA,oBANA,kCAQA,eACA,EACA,EACA,sCAXA,iBAQA,EARA,EAQA,KAKA,iBACA,sBAdA,yCAiBA,oBAjBA,iBAiBA,EAjBA,EAiBA,KACA,iBACA,sBAnBA,+CAuBI9B,UApCJ,SAoCA,cACA,uBACA,sBACM,OAAN,OAAM,CAAN,uBACQ,EAAR,gBAEQ+B,YAAW,WACTC,EAASC,aACnB,WCjIoW,I,wBCQhWC,EAAY,eACd,EACAnD,EACAiC,GACA,EACA,KACA,WACA,MAIa,aAAAkB,E,2CCnBf","file":"js/chunk-79ba5820.48d6c235.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"video-detail\"}},[_c('tab-bar',{attrs:{\"items\":_vm.items}}),_c('lay-out',{scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('video-box',{ref:\"videoBox\",attrs:{\"videoDetail\":_vm.videoDetail,\"VideoUrl\":_vm.videoUrl},on:{\"toggleBrs\":_vm.toggleBrs}}),_c('div',{staticStyle:{\"margin-top\":\"100px\"}}),_c('com-ment',{attrs:{\"hotComments\":_vm.hotComments,\"comments\":_vm.comments,\"total\":_vm.total,\"commentType\":5},on:{\"CurrentChange\":_vm.CurrentChange}})]},proxy:true},{key:\"right\",fn:function(){return [_c('tags-box',{attrs:{\"text\":\"视频简介\"}}),(_vm.videoDetail)?_c('div',{staticClass:\"video-info\"},[_c('p',{staticClass:\"publish-time\"},[_vm._v(\" 发布时间：\"+_vm._s(_vm._f(\"forMatDate\")(_vm.videoDetail.publishTime))+\" \")]),_c('p',{staticClass:\"play-count\"},[_vm._v(\" 播放次数：\"+_vm._s(_vm._f(\"formatPlayCount\")(_vm.videoDetail.playTime))+\"次 \")]),_c('p',{staticClass:\"info-text\"},[_vm._v(_vm._s(_vm.videoDetail.title))])]):_vm._e(),_c('tags-box',{attrs:{\"text\":\"相关推荐\"}}),_c('video-recommend',{attrs:{\"Pvideo\":_vm.Pvideo}})]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"video-detail\">\n    <tab-bar :items=\"items\"></tab-bar>\n    <lay-out>\n      <template #left>\n        <video-box\n          :videoDetail=\"videoDetail\"\n          :VideoUrl=\"videoUrl\"\n          @toggleBrs=\"toggleBrs\"\n          ref=\"videoBox\"\n        ></video-box>\n        <div style=\"margin-top: 100px\"></div>\n        <com-ment\n          :hotComments=\"hotComments\"\n          :comments=\"comments\"\n          :total=\"total\"\n          :commentType=\"5\"\n          @CurrentChange=\"CurrentChange\"\n        ></com-ment>\n      </template>\n      <template #right>\n        <tags-box text=\"视频简介\"></tags-box>\n        <div class=\"video-info\" v-if=\"videoDetail\">\n          <p class=\"publish-time\">\n            发布时间：{{ videoDetail.publishTime | forMatDate }}\n          </p>\n          <p class=\"play-count\">\n            播放次数：{{ videoDetail.playTime | formatPlayCount }}次\n          </p>\n          <p class=\"info-text\">{{ videoDetail.title }}</p>\n        </div>\n        <tags-box text=\"相关推荐\"></tags-box>\n        <video-recommend :Pvideo=\"Pvideo\"></video-recommend>\n      </template>\n    </lay-out>\n  </div>\n</template>\n\n<script>\nimport TabBar from \"../../components/tabbar/TabBar.vue\";\nimport LayOut from \"../../components/layout/LayOut.vue\";\nimport VideoBox from \"../../components/Videobox/VideoBox.vue\";\nimport ComMent from \"../../components/comment/ComMent.vue\";\nimport TagsBox from \"../home/discover/children/right/TagsBox.vue\";\nimport VideoRecommend from \"../../components/videoRecommend/VideoRecommend.vue\";\nimport {\n  getVideoUrl,\n  getVideoDetail,\n  getVideoComMent,\n  getRelatedAllvideo,\n} from \"../../api/api\";\nexport default {\n  name: \"VideoDetail\",\n  components: { LayOut, TabBar, VideoBox, ComMent, TagsBox, VideoRecommend },\n  data() {\n    return {\n      items: [\n        { title: \"推荐\", path: \"/home\" },\n        { title: \"排行榜\", path: \"/toplist\" },\n        { title: \"歌单\", path: \"/playlist\" },\n        { title: \"主播电台\", path: \"/djradio\" },\n        { title: \"歌手\", path: \"/artist\" },\n        { title: \"新碟上架\", path: \"/album\" },\n      ],\n      videoDetail: null,\n      videoUrl: null,\n      hotComments: null,\n      comments: null,\n      total: null,\n      Pvideo: null,\n    };\n  },\n  created() {\n    let id = this.$route.query.id;\n    this.getData(id);\n    this.$bus.$emit(\"activeRouer\", 0);\n  },\n  mounted() {\n    // 激活时,触发tabbar\n    this.$bus.$emit(\"activeChildrenRoute\", null);\n    if (this.$store.state.flag) {\n      this.$store.commit(\"ISFLAG\");\n      this.$bus.$emit(\"pause\");\n    }\n  },\n  methods: {\n    async getData(id) {\n      let { data: vdetail } = await getVideoDetail(id);\n      let { data: vurl } = await getVideoUrl(id);\n      this.videoDetail = vdetail.data;\n      this.videoUrl = vurl;\n      let { data: com } = await getVideoComMent(id);\n      this.hotComments = com.hotComments;\n      this.comments = com.comments;\n      this.total = com;\n      let { data: relatedVideo } = await getRelatedAllvideo(id);\n      this.Pvideo = relatedVideo.data;\n    },\n    async CurrentChange(newPage) {\n      let id = this.$route.query.id;\n      if (newPage === 1) {\n        let { data: com } = await getVideoComMent(id);\n        this.hotComments = com.hotComments;\n        this.comments = com.comments;\n      } else if (this.total.total >= 5000) {\n        // 重新发送评论请求根据分页数据\n        let { data: com } = await getVideoComMent(\n          id,\n          newPage,\n          this.comments[this.comments.length - 1].time\n        );\n        this.hotComments = [];\n        this.comments = com.comments;\n      } else {\n        // 重新发送评论请求根据分页数据\n        let { data: com } = await getVideoComMent(id, newPage);\n        this.hotComments = [];\n        this.comments = com.comments;\n      }\n    },\n    // 切换清晰度,失效(暂无接口参数)\n    toggleBrs(r) {\n      let id = this.$route.query.id;\n      let videoBox = this.$refs.videoBox;\n      getVideoUrl(id, r).then((v) => {\n        this.videoUrl = v.data;\n        // 成功之后调用子组件的方法\n        setTimeout(() => {\n          videoBox.resetBrs();\n        }, 200);\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.video-info {\n  margin: 20px 20px 40px;\n}\n.video-info > p {\n  line-height: 18px;\n  color: #999;\n  font-size: 12px;\n}\n.video-info > .info-text {\n  color: #333;\n  margin-top: 15px;\n  white-space: pre-line;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoDetail.vue?vue&type=template&id=47a9ac2d&scoped=true&\"\nimport script from \"./VideoDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VideoDetail.vue?vue&type=style&index=0&id=47a9ac2d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47a9ac2d\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoDetail.vue?vue&type=style&index=0&id=47a9ac2d&scoped=true&lang=css&\""],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/views/mvideo/Mvideo.vue?7c83","webpack:///src/views/mvideo/Mvideo.vue","webpack:///./src/views/mvideo/Mvideo.vue?2124","webpack:///./src/views/mvideo/Mvideo.vue","webpack:///./src/views/mvideo/Mvideo.vue?4d67"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","items","scopedSlots","_u","key","fn","ref","Vdetail","Vurl","on","toggleBrs","staticStyle","hotComments","comments","total","CurrentChange","proxy","staticClass","_v","_s","publishTime","_f","playCount","_e","Pmv","staticRenderFns","name","components","data","created","getData","id","$bus","$emit","mounted","$store","state","flag","commit","methods","setTimeout","videoBox","resetBrs","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,WAAW,CAACF,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQN,EAAIO,SAASH,EAAG,UAAU,CAACI,YAAYR,EAAIS,GAAG,CAAC,CAACC,IAAI,OAAOC,GAAG,WAAW,MAAO,CAACP,EAAG,YAAY,CAACQ,IAAI,WAAWN,MAAM,CAAC,QAAUN,EAAIa,QAAQ,KAAOb,EAAIc,MAAMC,GAAG,CAAC,UAAYf,EAAIgB,aAAaZ,EAAG,MAAM,CAACa,YAAY,CAAC,aAAa,WAAWb,EAAG,WAAW,CAACE,MAAM,CAAC,YAAcN,EAAIkB,YAAY,SAAWlB,EAAImB,SAAS,MAAQnB,EAAIoB,MAAM,YAAc,GAAGL,GAAG,CAAC,cAAgBf,EAAIqB,mBAAmBC,OAAM,GAAM,CAACZ,IAAI,QAAQC,GAAG,WAAW,MAAO,CAACP,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,UAAWN,EAAW,QAAEI,EAAG,MAAM,CAACmB,YAAY,WAAW,CAACnB,EAAG,IAAI,CAACJ,EAAIwB,GAAG,QAAQxB,EAAIyB,GAAGzB,EAAIa,QAAQa,gBAAgBtB,EAAG,IAAI,CAACJ,EAAIwB,GAAG,QAAQxB,EAAIyB,GAAGzB,EAAI2B,GAAG,kBAAP3B,CAA0BA,EAAIa,QAAQe,YAAY,SAAS5B,EAAI6B,KAAKzB,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,UAAUF,EAAG,kBAAkB,CAACE,MAAM,CAAC,IAAMN,EAAI8B,SAASR,OAAM,QAAW,IAC76BS,EAAkB,G,4GC4CtB,GACEC,KAAM,SACNC,WAAY,CAAd,iGACEC,KAHF,WAII,MAAO,CACL3B,MAAO,CACb,CAAQ,MAAR,KAAQ,KAAR,SACA,CAAQ,MAAR,MAAQ,KAAR,YACA,CAAQ,MAAR,KAAQ,KAAR,aACA,CAAQ,MAAR,OAAQ,KAAR,YACA,CAAQ,MAAR,KAAQ,KAAR,WACA,CAAQ,MAAR,OAAQ,KAAR,WAEMM,QAAS,KACTC,KAAM,KACNI,YAAa,KACbC,SAAU,KACVC,MAAO,KAEPU,IAAK,OAGTK,QAtBF,WAuBI,IAAJ,yBACIlC,KAAKmC,QAAQC,GACbpC,KAAKqC,KAAKC,MAAM,cAAe,IAEjCC,QA3BF,WA6BIvC,KAAKqC,KAAKC,MAAM,sBAAuB,MACnCtC,KAAKwC,OAAOC,MAAMC,OACpB1C,KAAKwC,OAAOG,OAAO,UACnB3C,KAAKqC,KAAKC,MAAM,WAGpBM,QAAS,CACP,QADJ,SACA,+LACA,kBADA,uBACA,EADA,EACA,KADA,SAEA,kBAFA,uBAEA,EAFA,EAEA,KACA,iBACA,cAJA,UAMA,kBANA,wBAMA,EANA,EAMA,KACA,4BACA,sBACA,UATA,UAWA,kBAXA,iBAWA,EAXA,EAWA,KACA,YAZA,+CAcI7B,UAfJ,SAeA,cACA,yBACA,sBACM,OAAN,OAAM,CAAN,uBACQ,EAAR,iBAEQ8B,YAAW,WACTC,EAASC,aACnB,SAGI,cA1BJ,SA0BA,gLACA,sBACA,MAFA,iCAGA,kBAHA,gBAGA,EAHA,EAGA,KACA,4BACA,sBALA,6BAMA,oBANA,kCAQA,eACA,EACA,EACA,sCAXA,iBAQA,EARA,EAQA,KAKA,iBACA,sBAdA,yCAiBA,oBAjBA,iBAiBA,EAjBA,EAiBA,KACA,iBACA,sBAnBA,iDC1G+V,I,wBCQ3VC,EAAY,eACd,EACAlD,EACAgC,GACA,EACA,KACA,WACA,MAIa,aAAAkB,E,6CCnBf,W","file":"js/chunk-2af6ede5.c5db58f6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"mvideo\"}},[_c('tab-bar',{attrs:{\"items\":_vm.items}}),_c('lay-out',{scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('video-box',{ref:\"videoBox\",attrs:{\"Vdetail\":_vm.Vdetail,\"Vurl\":_vm.Vurl},on:{\"toggleBrs\":_vm.toggleBrs}}),_c('div',{staticStyle:{\"margin-top\":\"100px\"}}),_c('com-ment',{attrs:{\"hotComments\":_vm.hotComments,\"comments\":_vm.comments,\"total\":_vm.total,\"commentType\":1},on:{\"CurrentChange\":_vm.CurrentChange}})]},proxy:true},{key:\"right\",fn:function(){return [_c('tags-box',{attrs:{\"text\":\"MV简介\"}}),(_vm.Vdetail)?_c('div',{staticClass:\"mv-info\"},[_c('p',[_vm._v(\"发布时间：\"+_vm._s(_vm.Vdetail.publishTime))]),_c('p',[_vm._v(\"播放次数：\"+_vm._s(_vm._f(\"formatPlayCount\")(_vm.Vdetail.playCount))+\"次\")])]):_vm._e(),_c('tags-box',{attrs:{\"text\":\"相似MV\"}}),_c('video-recommend',{attrs:{\"Pmv\":_vm.Pmv}})]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"mvideo\">\n    <tab-bar :items=\"items\"></tab-bar>\n    <lay-out>\n      <template #left>\n        <!-- 视频组件 -->\n        <video-box\n          :Vdetail=\"Vdetail\"\n          :Vurl=\"Vurl\"\n          @toggleBrs=\"toggleBrs\"\n          ref=\"videoBox\"\n        ></video-box>\n        <!-- 评论组件 -->\n        <div style=\"margin-top: 100px\"></div>\n        <com-ment\n          :hotComments=\"hotComments\"\n          :comments=\"comments\"\n          :total=\"total\"\n          @CurrentChange=\"CurrentChange\"\n          :commentType=\"1\"\n        ></com-ment>\n      </template>\n      <template #right>\n        <tags-box text=\"MV简介\"></tags-box>\n        <!-- mv简介盒子 -->\n        <div class=\"mv-info\" v-if=\"Vdetail\">\n          <p>发布时间：{{ Vdetail.publishTime }}</p>\n          <p>播放次数：{{ Vdetail.playCount | formatPlayCount }}次</p>\n        </div>\n\n        <tags-box text=\"相似MV\"></tags-box>\n        <video-recommend :Pmv=\"Pmv\"></video-recommend>\n      </template>\n    </lay-out>\n  </div>\n</template>\n\n<script>\nimport TabBar from \"../../components/tabbar/TabBar.vue\";\nimport LayOut from \"../../components/layout/LayOut.vue\";\nimport VideoBox from \"../../components/Videobox/VideoBox.vue\";\nimport ComMent from \"../../components/comment/ComMent.vue\";\nimport TagsBox from \"../home/discover/children/right/TagsBox.vue\";\nimport VideoRecommend from \"../../components/videoRecommend/VideoRecommend.vue\";\nimport { getMvUrl, getMvDetail, getMvComMent, getSimiMV } from \"../../api/api\";\nexport default {\n  name: \"Mvideo\",\n  components: { TabBar, LayOut, VideoBox, ComMent, TagsBox, VideoRecommend },\n  data() {\n    return {\n      items: [\n        { title: \"推荐\", path: \"/home\" },\n        { title: \"排行榜\", path: \"/toplist\" },\n        { title: \"歌单\", path: \"/playlist\" },\n        { title: \"主播电台\", path: \"/djradio\" },\n        { title: \"歌手\", path: \"/artist\" },\n        { title: \"新碟上架\", path: \"/album\" },\n      ],\n      Vdetail: null,\n      Vurl: null,\n      hotComments: null,\n      comments: null,\n      total: null,\n      // 推荐mv\n      Pmv: null,\n    };\n  },\n  created() {\n    let id = this.$route.query.mvid;\n    this.getData(id);\n    this.$bus.$emit(\"activeRouer\", 0);\n  },\n  mounted() {\n    // 激活时,触发tabbar\n    this.$bus.$emit(\"activeChildrenRoute\", null);\n    if (this.$store.state.flag) {\n      this.$store.commit(\"ISFLAG\");\n      this.$bus.$emit(\"pause\");\n    }\n  },\n  methods: {\n    async getData(id) {\n      let { data: mvDeatil } = await getMvDetail(id);\n      let { data: mvUrl } = await getMvUrl(id);\n      this.Vdetail = mvDeatil.data;\n      this.Vurl = mvUrl.data;\n      // mv评论\n      let { data: com } = await getMvComMent(id);\n      this.hotComments = com.hotComments;\n      this.comments = com.comments;\n      this.total = com;\n      // 获取相似 mv\n      let { data: simiMv } = await getSimiMV(id);\n      this.Pmv = simiMv.mvs;\n    },\n    toggleBrs(r) {\n      let id = this.$route.query.mvid;\n      let videoBox = this.$refs.videoBox;\n      getMvUrl(id, r).then((v) => {\n        this.Vurl = v.data.data;\n        // 成功之后调用子组件的方法\n        setTimeout(() => {\n          videoBox.resetBrs();\n        }, 200);\n      });\n    },\n    async CurrentChange(newPage) {\n      let id = this.$route.query.mvid;\n      if (newPage === 1) {\n        let { data: com } = await getMvComMent(id);\n        this.hotComments = com.hotComments;\n        this.comments = com.comments;\n      } else if (this.total.total >= 5000) {\n        // 重新发送评论请求根据分页数据\n        let { data: com } = await getMvComMent(\n          id,\n          newPage,\n          this.comments[this.comments.length - 1].time\n        );\n        this.hotComments = [];\n        this.comments = com.comments;\n      } else {\n        // 重新发送评论请求根据分页数据\n        let { data: com } = await getMvComMent(id, newPage);\n        this.hotComments = [];\n        this.comments = com.comments;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.mv-info {\n  margin: 15px 20px 30px;\n\n  font-size: 12px;\n  color: #999;\n}\n.mv-info > p {\n  line-height: 18px;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mvideo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mvideo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Mvideo.vue?vue&type=template&id=39ad9698&scoped=true&\"\nimport script from \"./Mvideo.vue?vue&type=script&lang=js&\"\nexport * from \"./Mvideo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Mvideo.vue?vue&type=style&index=0&id=39ad9698&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39ad9698\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mvideo.vue?vue&type=style&index=0&id=39ad9698&scoped=true&lang=css&\""],"sourceRoot":""}